<view class="container">
  <scroll-view scroll-y class="addr-list">
    <block wx:if="{{addressList.length === 0}}">
      <view class="empty-tip">暂无地址，请先新增</view>
    </block>
    <block wx:for="{{addressList}}" wx:key="id">
      <view class="addr-item">
        <view class="addr-main">
          <view class="row">
            <text class="name">{{item.consignee}}</text>
            <text class="phone">{{item.phone}}</text>
          </view>
          <view class="detail">{{item.detail}}</view>
        </view>
        <view class="addr-extra">
          <text class="label">{{item.label}}</text>
          <view class="default-btn" bindtap="onSetDefault" data-item="{{item}}">
            <text class="default-text">{{item.isDefault === 1 ? '默认' : '设为默认'}}</text>
          </view>
        </view>
      </view>
    </block>
  </scroll-view>

  <view class="add-btn" bindtap="openForm">+ 新增地址</view>

  <view class="mask" wx:if="{{showForm}}" bindtap="closeForm"></view>
  <view class="form-panel" wx:if="{{showForm}}">
    <view class="form-item">
      <text class="label">收货人</text>
      <input class="input" value="{{form.consignee}}" bindinput="onInputChange" data-field="consignee" placeholder="请输入收货人" />
    </view>
    <view class="form-item">
      <text class="label">手机号</text>
      <input class="input" value="{{form.phone}}" bindinput="onInputChange" data-field="phone" placeholder="请输入手机号" />
    </view>
    <view class="form-item">
      <text class="label">详细地址</text>
      <input class="input" value="{{form.detail}}" bindinput="onInputChange" data-field="detail" placeholder="楼号、门牌号等" />
    </view>
    <view class="form-item">
      <text class="label">标签</text>
      <input class="input" value="{{form.label}}" bindinput="onInputChange" data-field="label" placeholder="家/公司等" />
    </view>
    <view class="form-footer">
      <button class="btn cancel" bindtap="closeForm">取消</button>
      <button class="btn submit" bindtap="saveAddress">保存</button>
    </view>
  </view>
</view>

