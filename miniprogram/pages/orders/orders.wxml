<view class="container">
  <view class="empty-tip" wx:if="{{orders.length===0}}">暂无订单</view>
  <block wx:for="{{orders}}" wx:key="id">
    <view class="order-card">
      <view class="order-header">
        <text class="time">{{item.orderTime}}</text>
        <!-- 状态显示逻辑修正 -->
        <text class="status" wx:if="{{item.status===1}}">待支付</text>
        <text class="status" wx:elif="{{item.status===2}}">待接单</text>
        <text class="status" wx:elif="{{item.status===3}}">制作中/已出餐</text>
        <text class="status" wx:elif="{{item.status===4}}">已完成</text>
        <text class="status" wx:elif="{{item.status===5}}">已取消</text>
        <text class="status" wx:else>未知状态</text>
      </view>
      <view class="order-body">
        <text>订单号: {{item.number || '系统生成中...'}}</text>
        <text class="amount">¥{{item.amount}}</text>
      </view>
      <!-- 支付按钮：仅在待支付(1)时显示 -->
      <view class="order-footer" wx:if="{{item.status===1}}">
        <button class="btn pay-btn" size="mini" bindtap="payOrder" data-id="{{item.id}}">立即支付</button>
      </view>
    </view>
  </block>
</view>
