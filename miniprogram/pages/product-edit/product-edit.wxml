<view class="container">
  <view class="page-title">{{id ? '编辑菜品' : '新增菜品'}}</view>

  <view class="form-group">
    
    <view class="form-item">
      <view class="label">菜品名称</view>
      <input class="input" placeholder="请输入名称" value="{{name}}" bindinput="onInputName" />
    </view>

    <view class="form-item">
      <view class="label">所属分类</view>
      <picker mode="selector" range="{{categories}}" bindchange="onCategoryChange">
        <view class="picker-view">
          {{category || '请选择分类 >'}}
        </view>
      </picker>
    </view>

    <view class="form-item">
      <view class="label">价格 (¥)</view>
      <input class="input" type="digit" placeholder="0.00" value="{{price}}" bindinput="onInputPrice" />
    </view>

    <view class="form-item column-item">
      <view class="label">菜品图片</view>
      
      <image class="preview-img" src="{{image}}" mode="aspectFill" wx:if="{{image}}"></image>
      
      <button class="upload-btn" bindtap="chooseImage">
        {{image ? '更换图片' : '+ 点击上传图片'}}
      </button>

      <view class="tip-text" wx:if="{{image && image.indexOf('http') === -1}}">
        (当前为本地预览，保存后生效)
      </view>
    </view>

    <view class="form-item column-item">
      <view class="label">菜品描述</view>
      <textarea class="textarea" placeholder="介绍一下这道菜..." value="{{description}}" bindinput="onInputDesc"></textarea>
    </view>

  </view>

  <button class="save-btn" bindtap="submitForm">保存提交</button>
</view>